# 🛡️ 戦闘AIローグライク

プレイヤーがトークンベースの行動計算システムを組み上げて戦うRPGバトルゲームです。

## 🎮 ゲーム概要

- **戦闘システム**: 一般的なコマンドバトルをベースとした戦略的なバトル
- **行動設計**: プレイヤーがトークンを組み合わせてAIの行動パターンを作成
- **戦略性**: 状況に応じた行動計算ロジックを構築する楽しさ

## ⚙️ 行動計算システム

トークンを組み合わせることで、キャラクターの行動を決定するシステムです。

### 🔧 基本ルール

1. **複数行設定**: トークンを複数行に配置可能
2. **順次実行**: 1行目から順番に計算を実行
3. **アクション決定**: `break`せずに`Action`を決定できた行のアクションを実行
4. **失敗時**: どの行でも行動を決定できない場合は行動なし

### 📝 設定例

```javascript
[
    [Check(TrueOrFalseRandom), Heal],  // 50%の確率で回復
    [Attack]                           // 上記が失敗したら攻撃
]
```

### 🩺 HP条件での設定例

```javascript
[
    [Check(GreaterThanToken(Number(50), CharacterHP(SelfCharacter))), Check(TrueOrFalseRandom), Heal],  // HPが50未満かつ50%の確率で回復
    [Check(TrueOrFalseRandom), Strike]                                                                  // 50%の確率で攻撃
]
```

この設定により：
- HPが50未満の場合、50%の確率で回復を試行
- それ以外の場合、50%の確率で攻撃を実行
- 各行でアクションが決定されない場合は「何もしない」となる

## 📚 用語集

### 🎯 制御フロー

| 用語 | 説明 |
|------|------|
| **arguments** | トークンが受け取る引数。以降のトークンの計算結果を参照 |
| **continue** | 同じ行の次のトークンへ処理を継続 |
| **break** | 現在の行を中断し、次の行から計算を開始 |

### 🧩 トークンタイプ

#### 🔍 条件系
- **Check**: 引数が`True`なら`continue`、`False`なら`break`
- **TrueOrFalseRandom**: ランダムで`True`または`False`を返す
- **GreaterThanToken**: 2つの引数（数値）を比較して、最初が大きい（`>`） であれば `True` を返す

#### 固定値系
- **Number**: 特定の数値を返す（1~100）

#### 状況系
- **CharacterHP**: 引数のキャラクターのHPを返す
- **SelfCharacter**: ロジックを計算しているキャラクター自身を返す

#### ⚔️ アクション系
キャラクターが実際に行動を実行（コスト不足時は`break`）

- **Strike**: 基本攻撃
- **Heal**: 回復魔法（MP消費）

## 🚀 技術スタック

- **ゲームエンジン**: Bevy Engine (Rust)
- **UI**: 日本語フォント対応
- **アーキテクチャ**: ゲームロジックとBevy部分を分離した設計

